<!DOCTYPE html>
<html>
<head>
  <title>VUS Bus Location</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>#map { height: 400px; }</style>
</head>
<body>
  <h2>Bus Location</h2>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([0,0], 15);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
    var marker = L.marker([0,0]).addTo(map);

    function update() {
      fetch('http://localhost:3001/api/gps/bus1')
        .then(res => res.json())
        .then(loc => {
          marker.setLatLng([loc.lat, loc.lng]);
          map.setView([loc.lat, loc.lng]);
        });
    }
    setInterval(update, 3000);
    update();
  </script>
</body>
</html>